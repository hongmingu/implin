<!DOCTYPE html>
<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <title>Demo</title>
    {% include 'others/header_static.html' %}
    {% include 'others/favicon.html' %}

    {% load static from staticfiles %}
    <script src="{% static 'js/navbar.js' %}"></script>
    <script src="{% static 'js/nav_badge.js' %}"></script>
    <script src="{% static 'js/a_selected.js' %}"></script>

    <script src="{% static 'js/nav_badge_populate.js' %}"></script>
    <link href="https://fonts.googleapis.com/css?family=Tauri" rel="stylesheet">
    {% if user.is_authenticated %}
    {% else %}
    {% endif %}
</head>
<body class="light_background_color height_100">
<!--navbar start-->
{% include 'baseapp/_navbar.html' %}

<!--navbar end-->
<!--page info-->
{% include 'others/bootstrap_tester.html' %}

<div class="hidden" id="page_kind">home</div>

{% if user.is_authenticated %}
    <div class="hidden" id="user_id">{{ user.username }}</div>
{% else %}
    <div class="hidden" id="user_id"></div>
{% endif %}
<!--page info end -->

<div class="container-fluid margin_top_50">
    <div class="row">
        <div class="col-xs-12 col-sm-offset-3 col-sm-6 col-md-offset-4 col-md-4">
            <div class="row">
                <div align="center" class="pay_charge">
                    <h3>How much do you need?</h3>
                    <br>
                    <input id="unit_input" pattern="^\d{0,8}$"/><span class="dollar_unit">$</span>
                    <br>
                    <a href=""><div class="charge clickable" id="charge">charge</div></a>
                </div>

            </div>
        </div>
    </div>
</div>
</body>
<script>
    $(function () {
        $('#charge').click(function (e) {
            e.preventDefault()
            var get_unit = $('#unit_input').val()
            if (get_unit.length === 0){
                return false
            }
            var str_unit = get_unit.toString()
            var height = 'height=' + window.innerHeight
            window.open('/pay/charge/?q='+str_unit, '',
                'toolbar=no, location=no, status=no, menubar=no, scrollbars=yes, resizable=yes, fullscreen=yes, width=768,'+ height);
            return false;
        })

    })
    $('#btn_decimal').click(function (e) {
        e.preventDefault()
        var pattern = /^\d*(\.\d{0,2})?$/
        var get_value = $('#input_decimal').val()
        var str_value = get_value.toString()
        var fixed = Number(get_value).toFixed(2)
        console.log(get_value)
        console.log(fixed)
        console.log(typeof fixed)
        console.log(typeof parseInt(fixed))
        console.log(str_value.match())
    })
$(document).on('keydown', 'input[pattern]', function(e){
  var input = $(this);
  var oldVal = input.val();
  var regex = new RegExp(input.attr('pattern'), 'g');

  setTimeout(function(){
    var newVal = input.val();
    if(!regex.test(newVal)){
      input.val(oldVal);
    }
  }, 0);
});
</script>

</html>